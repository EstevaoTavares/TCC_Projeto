<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="style.css" />
    <title>Menu</title>
  </head>
    <body>
        <div class="menu">
            <div class="div">
                <div class="head">
                    <div class="overlap-8">
                            <div class="frase-slogan">
                                <div class="rectangle-10"></div>
                                <p class="text-wrapper-28">
                                Na SweetCupCake, cada mordida é uma explosão de sabor e alegria. Venha nos conhecer!
                                </p>
                            </div>
                            <div class="text-wrapper-29" onclick="irParainicio()">SweetCupCake</div>
                            <div class="text-wrapper-30" onclick="irParadepoimentos()">Depoimentos</div>
                        
                        <div class="text-wrapper-31">Bem Vindo!</div>
                        <div class="incio">
                            <div class="overlap-11">
                            
                            <div class="text-wrapper-32" onclick="irParainicio()">Início</div>
                            </div>
                        </div>
                        <div class="text-wrapper-33"  onclick="irParaMenu()">Menu</div>
                        <a href="index.html#localizacao" class="lojas-button">
                            <div class="text-wrapper-34">Lojas</div>
                        </a>
                        <div class="text-wrapper-35" onclick="irParaquem()">Quem Somos</div>
                            
                        <img class="user" src="imagem/user.png"  onclick="irParalogar()"/>
                        <img class="favorite-cart" src="imagem/carrinho.png" alt="Carrinho" onclick="openCart()" />
                    </div>
                </div>
                    <div class="popup-menu">
                        <div class="titulo">Nossos Sabores</div>
                        <p class="subtitulo">Descontos especiais para pedidos acima de 50 unidades</p>
                        <div class="cupcake-de-morango">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Morango', 8.50, 'quantity')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                <hr class="custom-line">
                                <div class="text-wrapper-3">
                                    <input type="number" id="quantity" name="quantity" value="1" min="1" class="quantity-input" />
                                    
                                  </div>
                                </div>
                                <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity')" />
                                <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-4">
                            <p class="text-wrapper-5">
                                Nosso Cupcake de Morango é feito com massa macia, recheado com creme suave de morango e coberto com
                                chantilly fresco, finalizado com pedaços de morango. Um toque perfeito de doçura e frescor!
                            </p>
                            <div class="text-wrapper-6">CupCake de Morango</div>
                            </div>
                            
                            <img class="rectangle-2" src="imagem/morango.jpg" />
                            <div class="text-wrapper-7">R$ 8.50</div>
                        </div>
                        <div class="cupcake-de-limo">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Limão', 10.00, 'quantity6')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                <hr class="custom-line">
                                <div class="text-wrapper-3">
                                    <input type="number" id="quantity6" name="quantity" value="1" min="1" class="quantity-input" />
                                    
                                  </div>
                                </div>
                                <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity6')" />
                                <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity6')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-5">
                            <p class="text-wrapper-8">
                                Refrescante e vibrante, nosso cupcake de limão combina um sabor cítrico perfeito com um toque de doçura.
                                Uma explosão de frescor a cada mordida!
                            </p>
                            <div class="text-wrapper-9">CupCake de Limão</div>
                            </div>
                           
                            <img class="rectangle-2" src="imagem/limao.jpg" />
                            <div class="text-wrapper-7">R$ 10.00</div>
                        </div>
                        <div class="cupcake-red-velvet">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Red Velvet', 10.00, 'quantity1')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                <hr class="custom-line">
                                <div class="text-wrapper-3">
                                    <input type="number" id="quantity1" name="quantity" value="1" min="1" class="quantity-input" />
                                    
                                  </div>
                                </div>
                                <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity1')" />
                                <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity1')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-5">
                            <p class="text-wrapper-8">
                                Uma massa aveludada, de coloração vermelha intensa, combinada com um recheio cremoso e cobertura de
                                cream cheese suave. Um clássico irresistível, perfeito para momentos especiais!
                            </p>
                            <div class="text-wrapper-9">CupCake Red Velvet</div>
                            </div>
                            
                            <img class="rectangle-2" src="imagem/red.jpg" />
                            <div class="text-wrapper-7">R$ 10.00</div>
                        </div>
                        <div class="cupcake-oreo">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Oreo', 10.00, 'quantity2')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                    <hr class="custom-line">
                                    <div class="text-wrapper-3">
                                        <input type="number" id="quantity2" name="quantity" value="1" min="1" class="quantity-input" />
                                        
                                      </div>
                                    </div>
                                    <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity2')" />
                                    <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity2')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-6">
                            <p class="text-wrapper-10">
                                Uma combinação perfeita de massa macia com pedaços crocantes de biscoito Oreo, recheado com um
                                irresistível creme de chocolate. Coberto com uma generosa camada de chantilly e finalizado com um pedaço
                                de Oreo, cada mordida é uma verdadeira indulgência!
                            </p>
                            <div class="text-wrapper-11">CupCake Oreo</div>
                            </div>
                            
                            <img class="rectangle-2" src="imagem/oreo.jpg" />
                            <div class="text-wrapper-7">R$ 10.00</div>
                        </div>
                        <div class="cupcake-de-chocolate">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Chocolate', 8.50, 'quantity3')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                    <hr class="custom-line">
                                    <div class="text-wrapper-3">
                                        <input type="number" id="quantity3" name="quantity" value="1" min="1" class="quantity-input" />
                                        
                                      </div>
                                    </div>
                                    <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity3')" />
                                    <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity3')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-7">
                            <p class="text-wrapper-12">
                                Um clássico irresistível, nosso cupcake de chocolate é feito com cacau premium e coberto com um creme
                                suave de chocolate. Perfeito para os amantes de chocolate!
                            </p>
                            <div class="text-wrapper-13">CupCake de Chocolate</div>
                            </div>
                            <img class="img" src="img/line-1-3.svg" />
                            <img class="rectangle-2" src="imagem/chocolate.jpg" />
                            <div class="text-wrapper-7">R$ 8.50</div>
                        </div>
                        <div class="cupcake-de-baunilha">
                            <div class="comprar">
                                <button class="overlap-group" onclick="addToCart('Cupcake de Baunilha', 8.50, 'quantity4')">
                                    <div class="text-wrapper-2">Comprar</div>
                                </button>
                            </div>
                            <div class="quantidade">
                            <div class="overlap-2">
                                <div class="overlap-3">
                                    <hr class="custom-line">
                                    <div class="text-wrapper-3">
                                        <input type="number" id="quantity4" name="quantity" value="1" min="1" class="quantity-input" />
                                        
                                      </div>
                                    </div>
                                    <img class="icon-minus" src="imagem/minus.png" alt="Diminuir" onclick="changeQuantity(-1, 'quantity4')" />
                                    <img class="icon-plus" src="imagem/plus.png" alt="Aumentar" onclick="changeQuantity(1, 'quantity4')" />
                                <div class="text-wrapper-4">Quantidade</div>
                            </div>
                            </div>
                            <div class="overlap-7">
                            <p class="text-wrapper-12">
                                Feito com baunilha natural, nosso cupcake de baunilha é leve e arejado, coberto com um delicioso creme
                                de baunilha. Simplesmente delicioso!
                            </p>
                            <div class="text-wrapper-13">CupCake de Baunilha</div>
                            </div>
                            <img class="img" src="img/line-1-5.svg" />
                            <img class="rectangle-2" src="imagem/baunilha.jpg" />
                            <div class="text-wrapper-7">R$ 8.50</div>
                        </div>
                        
                        
                        
                        <!-- Estrutura do Carrinho -->
                        <div id="side-cart" class="side-cart hidden">
                            <div class="cart-header">
                                <h2>🛒 Seu Carrinho</h2>
                                <button class="close-cart" onclick="closeCart()">×</button>
                                    
                            
                            </div>
                            <ul id="cart-list"></ul>
                            <div id="total-container">
                                <strong>Total a pagar:</strong>
                                <span id="total-price">R$ 0,00</span>
                            </div>

                            <div id="confirm-container">
                                <button id="confirm-button" onclick="confirmarCompra()">Confirmar Compra</button>
                            </div>
                            
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <script>
            function changeQuantity(change, inputId) {
            const input = document.getElementById(inputId);
            let currentValue = parseInt(input.value) || 1; // Garantir um valor numérico válido
            let newValue = currentValue + change;

            // Impedir valores menores que o mínimo
            if (newValue < parseInt(input.min)) {
                newValue = parseInt(input.min);
            }

            input.value = newValue;
        }

        let cart = []; // Carrinho de compras

        // Adicionar ao carrinho e mostrar o carrinho
        function addToCart(itemName, itemPrice, quantityId) {
            const quantityInput = document.getElementById(quantityId); // Obtém o campo de quantidade
            const quantity = parseInt(quantityInput.value) || 1;

            if (quantity <= 0) {
                alert("Por favor, insira uma quantidade válida.");
                return;
            }

            const hasDiscount = quantity >= 50; // Mais de 50 unidades
            const discountRate = hasDiscount ? 0.25 : 0; // 25% de desconto
            const discountedPrice = itemPrice * (1 - discountRate); // Aplica o desconto

            const item = {
                id: Date.now(),
                name: itemName,
                price: itemPrice,
                quantity: quantity,
                total: discountedPrice * quantity,
                hasDiscount: hasDiscount,
            };

            cart.push(item);
            updateCartDisplay();
            openCart();
        }

        // Atualiza a exibição do carrinho no DOM
        function updateCartDisplay() {
            const cartList = document.getElementById('cart-list');
            const totalElement = document.getElementById('total-price');

            cartList.innerHTML = '';
            cart.forEach((item) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    ${item.name} - R$ ${item.price.toFixed(2)} x ${item.quantity} = R$ ${item.total.toFixed(2)}
                    ${item.hasDiscount ? '<span class="discount-label">Desconto aplicado (25%)</span>' : ''}
                    <button class="remove-item" onclick="removeFromCart(${item.id})">Remover</button>
                `;
                cartList.appendChild(listItem);
            });

            totalElement.textContent = `R$ ${calculateTotal().toFixed(2)}`;
        }

        // Calcula o total do carrinho
        function calculateTotal() {
            return cart.reduce((sum, item) => sum + item.total, 0);
        }

        // Remover item do carrinho
        function removeFromCart(itemId) {
            const itemIndex = cart.findIndex((item) => item.id === itemId);
            if (itemIndex > -1) {
                cart.splice(itemIndex, 1);
            }
            updateCartDisplay();
        }

        // Abrir o carrinho
        function openCart() {
            const cartElement = document.getElementById('side-cart');
            cartElement.classList.add('visible');
            cartElement.classList.remove('hidden');
        }

        // Fechar o carrinho
        function closeCart() {
            const cartElement = document.getElementById('side-cart');
            cartElement.classList.remove('visible');
            cartElement.classList.add('hidden');
        }

        // Salvar pedido no Local Storage e redirecionar
        function confirmarCompra() {
            if (cart.length === 0) {
                alert("O carrinho está vazio! Adicione itens antes de confirmar.");
                return;
            }
            localStorage.setItem('cartItems', JSON.stringify(cart));
            window.location.href = 'resumo.html';
        }

        
        // Atualizar o carrinho ao carregar a página
        document.addEventListener('DOMContentLoaded', () => {
            updateCartDisplay();
            document.getElementById('confirmar-button').addEventListener('click', confirmarCompra);
        });


        function irParaMenu() {
        window.location.href = "menu.html"; // Substitua com o nome da sua página de menu
        }
        function irParainicio() {
        window.location.href = "index.html"; // Substitua com o nome da sua página de menu
        }
        function irParaquem() {
        window.location.href = "QuemSomos.html"; // Substitua com o nome da sua página de menu
        }
        function irParadepoimentos() {
        window.location.href = "depoimentos.html"; // Substitua com o nome da sua página de menu
        }
        function irParalogar() {
        window.location.href = "logar.html"; // Substitua com o nome da sua página de menu
        }
        function irPararesumo() {
        window.location.href = "resumo.html"; // Substitua com o nome da sua página de menu
        }
                    
        </script>
     </body>
</html>